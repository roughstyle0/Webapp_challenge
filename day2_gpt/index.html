<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æœç¤¼ã‚¹ãƒ”ãƒ¼ãƒãƒ»ãƒã‚¿å¸³ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: linear-gradient(135deg, #fef08a, #fdba74, #fb923c);
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center px-4">

  <div class="bg-white/90 backdrop-blur-md shadow-2xl rounded-3xl p-8 max-w-2xl w-full text-center border-4 border-orange-300">
    
    <h1 class="text-3xl md:text-4xl font-extrabold text-orange-600 mb-6">
      â˜€ æœç¤¼ã‚¹ãƒ”ãƒ¼ãƒãƒ»ãƒã‚¿å¸³ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ
    </h1>

    <div id="topicArea" class="mb-6">
      <p class="text-gray-500 text-sm mb-2">ä»Šæ—¥ã®ãŠé¡Œ</p>
      <h2 id="topic" class="text-2xl md:text-3xl font-bold text-gray-800 min-h-[80px] flex items-center justify-center">
        ã€Œãƒã‚¿ã‚’å¼•ãã€ã‚’æŠ¼ã—ã¦ãã ã•ã„
      </h2>
      <p id="hint" class="text-sm text-gray-600 mt-4 min-h-[50px]">
      </p>
    </div>

    <button id="drawBtn"
      class="bg-orange-500 hover:bg-orange-600 active:scale-95 transition transform duration-150 text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg">
      ğŸ¯ ãƒã‚¿ã‚’å¼•ã
    </button>

    <p id="errorMsg" class="text-red-500 text-sm mt-4 hidden">
      ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚
    </p>

  </div>

  <script>
    const topics = [
      { title: "æœ€è¿‘æ„Ÿè¬ã—ãŸã‚¹ã‚¿ãƒƒãƒ•", hint: "å…·ä½“çš„ãªè¡Œå‹•ã‚’æŒ™ã’ã¦ã€ãªãœæ„Ÿè¬ã—ãŸã®ã‹ã‚’å…±æœ‰ã—ã¾ã—ã‚‡ã†ã€‚" },
      { title: "ãŠå®¢æ§˜ã‹ã‚‰é ‚ã„ãŸå¬‰ã—ã„è¨€è‘‰", hint: "ãã®è¨€è‘‰ãŒãƒãƒ¼ãƒ ã«ã©ã‚“ãªå½±éŸ¿ã‚’ä¸ãˆãŸã‹ã‚’ä¼ãˆã¾ã—ã‚‡ã†ã€‚" },
      { title: "ä»Šæœˆã®æ³¨åŠ›å•†å“ã«ã¤ã„ã¦", hint: "ãŠå®¢æ§˜ã«ã¨ã£ã¦ã®ãƒ¡ãƒªãƒƒãƒˆã‚’ä¸­å¿ƒã«è©±ã™ã¨åŠ¹æœçš„ã§ã™ã€‚" },
      { title: "å¤±æ•—ã‹ã‚‰å­¦ã‚“ã ã“ã¨", hint: "å¤±æ•—â†’å­¦ã³â†’æ¬¡ã®è¡Œå‹•ã€ã®é †ã§è©±ã™ã¨å‰å‘ãã«ãªã‚Šã¾ã™ã€‚" },
      { title: "æœ€è¿‘ã®ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ‹ãƒ¥ãƒ¼ã‚¹", hint: "åº—èˆ—ã‚„æ¥­å‹™ã«ã©ã†æ´»ã‹ã›ã‚‹ã‹ã‚’çµã³ã¤ã‘ã¾ã—ã‚‡ã†ã€‚" },
      { title: "ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®å¤§åˆ‡ã•", hint: "å®Ÿéš›ã®ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚’äº¤ãˆã‚‹ã¨èª¬å¾—åŠ›ãŒå¢—ã—ã¾ã™ã€‚" },
      { title: "æ˜¨æ—¥ã®å°ã•ãªæˆåŠŸä½“é¨“", hint: "å°ã•ãªæˆåŠŸã‚’ç§°ãˆã‚‹ã“ã¨ã§é›°å›²æ°—ãŒæ˜ã‚‹ããªã‚Šã¾ã™ã€‚" },
      { title: "ä»Šæœˆã®å€‹äººç›®æ¨™", hint: "æ•°å€¤ã‚„å…·ä½“çš„ãªè¡Œå‹•ã‚’å«ã‚ã‚‹ã¨æ˜ç¢ºã«ãªã‚Šã¾ã™ã€‚" },
      { title: "ãŠå®¢æ§˜ç›®ç·šã§è€ƒãˆã‚‹å¤§åˆ‡ã•", hint: "å®Ÿéš›ã®æ¥å®¢ã‚·ãƒ¼ãƒ³ã‚’æƒ³åƒã—ã¦è©±ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚" },
      { title: "æœ€è¿‘æŒ‘æˆ¦ã—ãŸã“ã¨", hint: "æŒ‘æˆ¦ã—ãŸç†ç”±ã¨å¾—ã‚‰ã‚ŒãŸæ°—ã¥ãã‚’å…±æœ‰ã—ã¾ã—ã‚‡ã†ã€‚" },
      { title: "æ™‚é–“ç®¡ç†ã®ã‚³ãƒ„", hint: "è‡ªåˆ†ãŒå®Ÿè·µã—ã¦ã„ã‚‹å…·ä½“çš„ãªæ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ã‚‡ã†ã€‚" },
      { title: "ãƒãƒ¼ãƒ ã§ä¹—ã‚Šè¶ŠãˆãŸå‡ºæ¥äº‹", hint: "æ„Ÿè¬ã¨ç§°è³›ã‚’å¿…ãšæ·»ãˆã¾ã—ã‚‡ã†ã€‚" },
      { title: "å¥åº·ç®¡ç†ã®é‡è¦æ€§", hint: "æœç¤¼ã ã‹ã‚‰ã“ãã€å‰å‘ããªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã€‚" },
      { title: "ç¬‘é¡”ã®åŠ›", hint: "ç¬‘é¡”ãŒä¸ãˆã‚‹å½±éŸ¿ã‚’å…·ä½“ä¾‹ã§ä¼ãˆã¾ã—ã‚‡ã†ã€‚" },
      { title: "ãŠå®¢æ§˜æº€è¶³åº¦ã‚’é«˜ã‚ã‚‹å·¥å¤«", hint: "ã™ãå®Ÿè·µã§ãã‚‹ä¸€è¨€ã‚’æ·»ãˆã‚‹ã¨åŠ¹æœçš„ã§ã™ã€‚" },
      { title: "æ–°äººã‚¹ã‚¿ãƒƒãƒ•ã¸ã®ã‚¨ãƒ¼ãƒ«", hint: "å®‰å¿ƒæ„Ÿã‚’ä¸ãˆã‚‹è¨€è‘‰ã‚’é¸ã³ã¾ã—ã‚‡ã†ã€‚" },
      { title: "æœ€è¿‘èª­ã‚“ã æœ¬ã‚„è¨˜äº‹ã®å­¦ã³", hint: "æ¥­å‹™ã¨ã®é–¢é€£æ€§ã‚’æ„è­˜ã—ã¾ã—ã‚‡ã†ã€‚" },
      { title: "ã‚¯ãƒ¬ãƒ¼ãƒ å¯¾å¿œã‹ã‚‰å­¦ã‚“ã ã“ã¨", hint: "æ”¹å–„ç‚¹ã¨å‰å‘ããªå­¦ã³ã‚’å¼·èª¿ã—ã¾ã—ã‚‡ã†ã€‚" },
      { title: "åº—èˆ—ã®å¼·ã¿ã«ã¤ã„ã¦", hint: "ä»–åº—ã«ã¯ãªã„é­…åŠ›ã‚’å†ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚" },
      { title: "ä»Šæ—¥ä¸€æ—¥ã®ãƒ†ãƒ¼ãƒå®£è¨€", hint: "çŸ­ãã€åŠ›å¼·ãã¾ã¨ã‚ã‚‹ã®ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚" }
    ];

    const topicEl = document.getElementById("topic");
    const hintEl = document.getElementById("hint");
    const drawBtn = document.getElementById("drawBtn");
    const errorMsg = document.getElementById("errorMsg");

    let lastIndex = -1;
    let isAnimating = false;

    function drawTopic() {
      if (isAnimating) return;

      try {
        if (!Array.isArray(topics) || topics.length === 0) {
          throw new Error("ãƒã‚¿ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã—ã¾ã›ã‚“");
        }

        isAnimating = true;
        drawBtn.disabled = true;
        drawBtn.classList.add("opacity-50", "cursor-not-allowed");

        let count = 0;
        const spinInterval = setInterval(() => {
          const randomIndex = Math.floor(Math.random() * topics.length);
          topicEl.textContent = topics[randomIndex].title;
          hintEl.textContent = "ãƒ’ãƒ³ãƒˆã‚’æº–å‚™ä¸­...";
          count++;

          if (count > 15) {
            clearInterval(spinInterval);

            let finalIndex;
            do {
              finalIndex = Math.floor(Math.random() * topics.length);
            } while (finalIndex === lastIndex && topics.length > 1);

            lastIndex = finalIndex;

            topicEl.textContent = topics[finalIndex].title;
            hintEl.textContent = "ğŸ’¡ ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆ: " + topics[finalIndex].hint;

            drawBtn.disabled = false;
            drawBtn.classList.remove("opacity-50", "cursor-not-allowed");
            isAnimating = false;
          }
        }, 80);

        errorMsg.classList.add("hidden");

      } catch (error) {
        console.error(error);
        errorMsg.classList.remove("hidden");
        drawBtn.disabled = false;
        isAnimating = false;
      }
    }

    drawBtn.addEventListener("click", drawTopic);
  </script>

</body>
</html>
